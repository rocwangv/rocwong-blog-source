---
title: 深入理解浏览器系列之进程与线程之间的区别
tags:
  - 进程与线程
categories:
  - 浏览器
date: 2020-06-09 11:15:21
---

![banner](https://cdn.jsdelivr.net/gh/rocwong-cn/assets/browser/process-thread.png)

## 什么是进程？什么是线程？

### 进程的定义

进程是执行中的一段程序，即一旦程序被载入到内存中并准备执行，它就是一个进程。进程是表示资源分配的基本概念，又是调度运行的基本单位，是系统中的并发执行的单位。

### 线程的定义

单个进程中执行的每个任务就是一个线程。线程是进程中执行运算的最小单位。
一个线程只能属于一个进程，但是一个进程可以拥有多个线程。多线程处理就是允许一个进程中在同一时刻执行多个任务。

可以结合下图来理解二者之间的关系：

![图说进程和线程](https://cdn.jsdelivr.net/gh/rocwong-cn/assets/browser/cartoon-process-thread.jpg)

## 进程 VS 线程

首先，我们知道浏览器在处理任务时，使用并行处理相较串行处理而言可以大大提升性能。对应到线程里面来讲，也就是单线程就是串行，多线程就可以实现并行。线程是依附于进程的，而进程中使用多线程并行处理就能提升运算效率。

![单线程和多线程](https://cdn.jsdelivr.net/gh/rocwong-cn/assets/browser/single-vs-many-threads.png)

总结来说，进程和线程的关系有以下4个特点：

* 进程中的任意一个线程执行出错，都会导致整个进程的崩溃；
* 线程之间共享进程中的数据；
* 当一个进程关闭后，操作系统会回收进程所占用的内存；
* 进程之间的内容相互隔离，如果进程之间需要通信则需使用IPC。

## 单进程浏览器时代

> 单进程浏览器是指浏览器的所有功能模块都是运行在同一个进程里。这些模块包含了网络、插件、js运行环境、渲染引擎和页面等。

单进程浏览器的弊端：

* 不稳定；

若插件崩溃或者内存泄露时，容易阻塞浏览器主进程造成浏览器崩溃；

* 不流畅；

若js运行环境中有特别耗时，如执行了一个无限循环脚本，它会独占整个县城，导致真个浏览器失去响应、卡顿等。

* 不安全；

插件模块在主进程中，可以获取到操作系统的任意资源，这就给了恶意插件入侵电脑的可趁之机。

## 多进程浏览器时代

### 早期的多进程架构
